# PRD: Roll-Call (엑셀 기반 팀/구역별 명단 생성기)

## 1. 프로젝트 개요

- **프로젝트명**: roll-call
- **목적**: 엑셀 파일 업로드 후 팀→구역 계층 구조로 명단 자동 생성
- **타겟 유저**: 팀/구역 단위 명단 관리자
- **핵심 가치**: 수동 정리 없이 구조화된 명단 즉시 출력

## 2. 핵심 기능

### 2.1 파일 처리

- 엑셀 파일(.xlsx, .xls) 업로드
- 열 머리글 자동 인식: 팀, 구역, 고유번호, 이름, 출결여부
- 원본 데이터 순서 유지

### 2.2 팀 선택

- 업로드한 파일에서 팀 목록 추출
- 드롭다운으로 팀 선택

### 2.3 머리글 설정

- 팀 선택 후 우측에 "머리글 설정" 입력란 표시
- 사용자가 명단 위에 붙일 안내문 작성
- 텍스트 에리어 형식 (여러 줄 입력 가능)

### 2.4 명단 생성

- "명단 생성" 버튼 클릭 시 실행
- 선택된 팀의 구역별 그룹핑
- 각 구역 내 순번 자동 부여 (1부터 시작)
- 출력 형식:

```
  [사용자 작성 머리글]

  [팀명]
  [구역명]
  순번 / 고유번호 / 이름 / [출결제외시 X]
  1 / ABC123 / 홍길동 /
  2 / DEF456 / 김철수 / X
```

## 3. UI/UX 요구사항

### 3.1 레이아웃

- 좌우 분할: 1:2 비율
- **좌측 (33%)**
  - 파일 업로드 영역
  - 팀 선택 드롭다운
- **우측 (67%)**
  - 머리글 설정 입력란 (팀 선택 후 표시)
  - 명단 생성 버튼
  - 명단 출력 영역 (버튼 클릭 후 표시)
  - 구역별 섹션 구분

### 3.2 인터랙션 플로우

1. 파일 업로드 → 팀 목록 자동 로드
2. 팀 선택 → 우측에 "머리글 설정" 입력란 표시
3. 머리글 작성 (선택 사항)
4. "명단 생성" 버튼 클릭 → 명단 출력
5. 복사 가능한 텍스트 형식

### 3.3 UI 상태 관리

- 파일 미업로드 시: 팀 선택 비활성화
- 팀 미선택 시: 머리글 설정 미표시
- 머리글 설정 완료 전: 명단 생성 버튼 표시는 하되 선택 사항

## 4. 데이터 처리 규칙

### 4.1 순번 생성

- 구역별로 1부터 시작
- 엑셀 원본 행 순서 유지
- 팀/구역 변경시 순번 리셋

### 4.2 출결 표시

- 출결여부 열 값이 "출결제외" → 마지막에 " X" 추가
- 그 외 값 → 표시 안 함

### 4.3 머리글 처리

- 사용자 입력 텍스트 그대로 명단 최상단에 표시
- 미입력 시 머리글 없이 명단만 출력
- 줄바꿈 유지

### 4.4 필수 열

- 팀, 구역, 고유번호, 이름, 출결여부

## 5. 기술 제약사항

- **프레임워크**: Streamlit
- **파일 처리**: pandas (read_excel), openpyxl
- **언어**: Python 3.11 (안정화 최신 버전)
- **배포**: Google Cloud Run
- **컨테이너**: Docker
- **저장소명**: roll-call

## 6. 예외 처리

- 필수 열 누락시 에러 메시지
- 잘못된 파일 형식 업로드 방지
- 빈 데이터 처리 (해당 구역 표시 안 함)
- 팀 미선택 시 명단 생성 방지

## 7. 배포 요구사항

- Dockerfile 포함
- requirements.txt 버전 명시
- 포트: 8080 (Cloud Run 기본)
- 헬스체크 엔드포인트 설정
- 환경변수 관리 (.env)

## 8. 추가 고려사항

- 명단 전체 복사 버튼
- 반응형 레이아웃
- 머리글 미리보기 기능 (선택 옵션)
